import{_ as x,r as c,o as S,c as V,b as e,d as r,t as v,l as d,w as f,Y as b,a9 as C,E as l,aa as N,e as n,f as k,a8 as B,M as E,m as M,g as z,B as D,h as K}from"./index-xsXBKXXp.js";import{_ as R}from"./logo-Dp76uQSX.js";const T={class:"share-page"},q={class:"main-content"},A={class:"share-container"},F={class:"share-info"},J={class:"share-header"},O={class:"user-meta"},U={class:"username"},Y={class:"share-time"},j={class:"share-body"},G={class:"share-icon"},H={class:"verify-area"},L={class:"verify-form"},P={__name:"ShareView",setup(Q){const u=D(),h=K(),o=c({}),t=c(""),i=c(!1),p=async()=>{try{const a=u.params.shareId,s=await C(a);s.code===1&&(o.value=s.data)}catch(a){console.error("获取分享信息失败:",a),l.error("获取分享信息失败")}},_=async()=>{if(!t.value){l.warning("请输入提取码");return}if(t.value.length!==5){l.warning("提取码必须是5位");return}try{i.value=!0;const a=await N(u.params.shareId,t.value);a.code===1&&(l.success("验证成功"),localStorage.setItem("shareInfo",JSON.stringify(o.value)),h.push({name:"shareFiles",query:{fileIds:a.data.fileIds,userId:a.data.userId}}))}catch(a){console.error("验证失败:",a),l.error("提取码错误")}finally{i.value=!1}};return S(()=>{p()}),(a,s)=>{const m=n("el-avatar"),y=n("el-icon"),g=n("el-input"),I=n("el-button");return k(),V("div",T,[s[5]||(s[5]=e("div",{class:"header"},[e("div",{class:"logo-container"},[e("img",{src:R,alt:"logo",class:"logo"}),e("span",{class:"logo-text"},"在线网盘")])],-1)),e("div",q,[e("div",A,[e("div",F,[e("div",J,[r(m,{size:80,src:o.value.avatar},null,8,["src"]),e("div",O,[e("div",U,v(o.value.userName),1),e("div",Y,"分享于 "+v(d(B)(o.value.shareTime)),1)])]),e("div",j,[e("div",G,[r(y,{size:80},{default:f(()=>[r(d(E))]),_:1})]),s[1]||(s[1]=e("div",{class:"share-title"},"分享内容",-1))])]),e("div",H,[s[3]||(s[3]=e("div",{class:"verify-header"},[e("h3",null,"请输入提取码"),e("p",{class:"verify-tip"},"提取码验证通过后即可获取文件")],-1)),e("div",L,[r(g,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=w=>t.value=w),placeholder:"请输入5位提取码",maxlength:"5","prefix-icon":d(M),class:"code-input",onKeyup:b(_,["enter"])},null,8,["modelValue","prefix-icon"]),r(I,{type:"primary",class:"verify-btn",onClick:_,loading:i.value},{default:f(()=>s[2]||(s[2]=[z(" 验证提取码 ")])),_:1},8,["loading"])]),s[4]||(s[4]=e("div",{class:"verify-tips"},[e("h4",null,"温馨提示"),e("ul",null,[e("li",null,"请在有效期内及时保存文件，过期后文件将无法访问"),e("li",null,"如果遇到问题，请联系分享者重新分享"),e("li",null,"提取码是区分大小写的，请正确输入")])],-1))])])])])}}},Z=x(P,[["__scopeId","data-v-2e17b03a"]]);export{Z as default};
